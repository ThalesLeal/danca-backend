{% extends "admin/base_site.html" %}
{% load i18n static %}

{% block extrastyle %}{{ block.super }}
<link rel="stylesheet" href="{% static " admin/css/dashboard.css" %}">{% endblock %}

{% block coltype %}colMS{% endblock %}

{% block bodyclass %}{{ block.super }} dashboard{% endblock %}

{% block nav-breadcrumbs %}{% endblock %}

{% block nav-sidebar %}{% endblock %}

{% block content %}
<p>Funcionalidades do Sistema</p>
<div id="content-main">
    {% if app_list %}
    {% for app in app_list %}
    <h2>{{ app.name }}</h2>
        <div class="row" style="flex-direction: row; flex-wrap: wrap;">
        {% for model in app.models %}
            <div class="col-sm-6 col-md-4 col-lg-3">
                <div class="br-card hover">
                    <a href="{{ model.admin_url }}" style="text-decoration: none;">
                        <div class="card-content">
                            <span class="br-avatar">
                                <span class="content {{ HEADER_BG_COLOR }} {{ HEADER_FONT_COLOR }}">
                                    {{ model.name|first }}
                                </span>
                            </span>
                            <span class="ml-2 text-gray-80 text-weight-bold text-up-02">
                                {{ model.name }}
                            </span>
                        </div>
                    </a>
                </div>
            </div>
        {% endfor %}
        </div>
    {% endfor %}
    {% else %}
        <p>Aparentemente, você não tem permissão para estar aqui.</p>
    {% endif %}
</div>
{% endblock %}

{% block sidebar %}
<div id="content-related">
    <div class="module" id="recent-actions-module">
        <h2>{% translate 'Recent actions' %}</h2>
        <h3>{% translate 'My actions' %}</h3>
        {% load log %}
        {% get_admin_log 10 as admin_log for_user user %}
        {% if not admin_log %}
        <p>{% translate 'None available' %}</p>
        {% else %}
        <ul class="actionlist">
            {% for entry in admin_log %}
            <li
                class="{% if entry.is_addition %}addlink{% endif %}{% if entry.is_change %}changelink{% endif %}{% if entry.is_deletion %}deletelink{% endif %}">
                {% if entry.is_deletion or not entry.get_admin_url %}
                {{ entry.object_repr }}
                {% else %}
                <a href="{{ entry.get_admin_url }}">{{ entry.object_repr }}</a>
                {% endif %}
                <br>
                {% if entry.content_type %}
                <span class="mini quiet">{% filter capfirst %}{{ entry.content_type.name }}{% endfilter %}</span>
                {% else %}
                <span class="mini quiet">{% translate 'Unknown content' %}</span>
                {% endif %}
            </li>
            {% endfor %}
        </ul>
        {% endif %}
    </div>
</div>
{% endblock %}