{% load static %}
<nav class="navbar navbar-expand-lg navbar-dark fixed-top">
  <div class="container-fluid">
    <a class="navbar-brand" href="/">
      <img src="{% static 'img/logo_branca.png' %}" alt="Logo Zouk Jampa" />
    </a>
    <button class="navbar-toggler" type="button" data-bs-toggle="collapse" data-bs-target="#navbar-content" aria-controls="navbarSupportedContent" aria-expanded="false" aria-label="Toggle navigation">
      <span class="navbar-toggler-icon"></span>
    </button>

    <div class="collapse navbar-collapse" id="navbar-content">
      {% if user.is_authenticated %}
      <ul class="navbar-nav me-auto mb-2 mb-lg-0">
      </ul>

      <hr class="d-lg-none">
      <span class="navbar-text text-white me-lg-4 d-inline-block">Ol√°, {{ user.first_name|title }} {{ user.last_name|title }}</span>
      <div class="vr me-3 d-none d-lg-inline-block d-lg-inline-block"></div>

      <form class="d-flex" method="post" action="{% url 'oidc_logout' %}">
        {% csrf_token %}
        <button id="btn-logout" class="btn btn-light" type="submit">Sair<i class="bi-box-arrow-in-right"></i></button>
      </form>
      {% else %}
      <hr class="d-lg-none">
      <div class="vr ms-auto me-3 d-none d-lg-inline-block d-lg-inline-block"></div>
      <a href="{% url 'oidc_authentication_init' %}" class="btn btn-light">Login</a>
      {% endif %}
    </div>
  </div>
</nav>

<script>
  var btnLoggout = document.getElementById("btn-logout")
  fetch('/get-gov-logout-url/')
    .then(response => response.json())
    .then(data => {
      const govLogoutRedirectUrl = data.gov_logout_redirect_url;
      btnLoggout.onclick = function () {
        window.open(govLogoutRedirectUrl, "_blank");
      }
    });
</script>

<style>
  img {
    width: 110px;
  }
</style>