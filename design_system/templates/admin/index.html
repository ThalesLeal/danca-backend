{% extends "admin/base_site.html" %}
{% load i18n static %}

{% block coltype %}colMS{% endblock %}

{% block bodyclass %}{{ block.super }} dashboard{% endblock %}

{% block nav-breadcrumbs %}{% endblock %}

{% block nav-sidebar %}{% endblock %}

{% block content %}
<div id="content-main">
    {% if app_list %}
    {% for app in app_list %}
    <h2>{{ app.name }}</h2>
        <div class="row" style="flex-direction: row; flex-wrap: wrap;">
        {% for model in app.models %}
            <div class="col-sm-6 col-md-4 col-lg-3">
                <div class="br-card hover">
                    <a href="{{ model.admin_url }}" style="text-decoration: none;">
                        <div class="card-content">
                            <span class="br-avatar">
                                <span class="content {{ HEADER_BG_COLOR }} {{ HEADER_FONT_COLOR }}">
                                    {{ model.name|first }}
                                </span>
                            </span>
                            <span class="ml-2 text-gray-80 text-weight-bold text-up-02">
                                {{ model.name }}
                            </span>
                        </div>
                    </a>
                </div>
            </div>
        {% endfor %}
        </div>
    {% endfor %}
    {% else %}
        <p>Aparentemente, você não tem permissão para estar aqui.</p>
    {% endif %}
</div>
{% endblock %}

{% block sidebar %}
<div id="content-related">

    <div class="br-card bg-gray-5">
        <div class="card-header">
            <div class="text-weight-semi-bold text-up-03">
                {% translate 'Recent actions' %}
            </div>
        </div>
        <div class="card-content">
            {% load log %}
            {% get_admin_log 10 as admin_log for_user user %}
            {% if not admin_log %}
            <p>{% translate 'None available' %}</p>
            {% else %}
            <ul class="p-0">
                {% for entry in admin_log %}
                <li class="br-item">
                    <i class="{% if entry.is_addition %}fas fa-plus text-green-60{% endif %}{% if entry.is_change %}fas fa-pen text-orange-40{% endif %}{% if entry.is_deletion %}fas fa-times-circle text-red-50{% endif %}" aria-hidden="true"></i>
                    {% if entry.is_deletion or not entry.get_admin_url %}
                        <span class="text-weight-semi-bold">{{ entry.object_repr }}</span>
                    {% else %}
                        <span class="text-weight-semi-bold"><a href="{{ entry.get_admin_url }}">{{ entry.object_repr }}</a></span>
                    {% endif %}
                        <br>
                    {% if entry.content_type %}
                        <span class="p-3">{% filter capfirst %}{{ entry.content_type.name }}{% endfilter %}</span>
                    {% else %}
                        <span class="p-3">{% translate 'Unknown content' %}</span>
                    {% endif %}
                </li>
                {% endfor %}
            </ul>
            {% endif %}
        </div>
    </div>
</div>
{% endblock %}